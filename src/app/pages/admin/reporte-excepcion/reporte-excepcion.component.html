  <div class="relative overflow-x-auto ">
    <app-title titulo="REPORTE DE AVANCE DE EXCEPCIÓN"></app-title>
    <div class="max-w-xl mx-auto p-4 bg-white rounded-lg shadow-md border border-gray-300 rounded-md mb-6">
      <div class="flex items-center justify-center">
        <div>
          <div *ngIf="calendarData == undefined" style="height: 53px; margin-right: 0.5rem ">
            <mat-form-field>
              <mat-select placeholder="Periodo"></mat-select>
            </mat-form-field>
          </div> 
          <div *ngIf="calendarData != undefined" style=" height: 53px; margin-right: 0.5rem ">
            <mat-form-field>
              <mat-select placeholder="Periodo" [(ngModel)]="Periodo">
                <mat-option *ngFor="let item of calendarData.registros" [value]="item.vCodigo">
                  {{item.vNombre}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div> 
        </div>

        <div>
          <div *ngIf="calendarData == undefined" style="height: 53px; margin-right: 0.5rem ">
            <mat-form-field>
              <mat-select placeholder="Tipo de excepción"></mat-select>
            </mat-form-field>
          </div> 
          <div *ngIf="calendarData != undefined" style=" height: 53px; margin-right: 0.5rem ">
            <mat-form-field>
              <mat-select placeholder="Tipo de excepción" [(ngModel)]="ViewTypeSelected">
                <mat-option value="conocimiento">Conocimiento</mat-option>
                <mat-option value="autoeval">Autoevaluación</mat-option>
                <mat-option value="eval">Evaluación</mat-option>
                <mat-option value="calibracion">Calibración</mat-option>
                <mat-option value="retroalimentacion">Retroalimentación</mat-option>
                <mat-option value="PID_EST">PID registro</mat-option>
                <mat-option value="PID_EVAL">PID cumplimiento </mat-option>
              </mat-select>
            </mat-form-field>
          </div> 
        </div>

          <button style="width: 107.42px;" (click)="FilterData()"  class="items-center justify-center py-2 bg-blue-600 text-white rounded-md flex items-center hover:bg-blue-700 ">
            <svg class="w-5 h-5 text-white"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
              <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"/>
            </svg>                
            Buscar
          </button>
      </div>
    </div>
    
    <!-- Knowledge table -->
    <div *ngIf="OnSearchViewType === 'conocimiento' && showtable" class="relative overflow-x-auto ">
      <table class="w-full text-sm text-left rtl:text-right text-gray-500 border solid">
          <thead class="text-xs text-gray-700 uppercase bg-gray-5">
              <tr>
                  <th scope="col" class="px-6 py-3 border" style="width: 2rem;">
                      <!-- Columna para la flecha -->
                  </th>
                  <th scope="col" class="px-6 py-3 border" style="width: 8rem;">Foto</th>
                  <th scope="col" class="px-6 py-3 border" style="width: 5.9rem;">COD. FICHA</th>
                  <th scope="col" class="px-6 py-3 border" style="width: 35rem;">APELLIDOS Y NOMBRES</th>
                  <th scope="col" class="px-6 py-3 border" style="width: 8.5rem;">UNIDAD ORGÁNICA</th>
                  <th scope="col" class="px-6 py-3 border" style="width: 6.8rem;">COD. PUESTO</th>
                  <th scope="col" class="px-6 py-3 border text-wrap" style="width: 35rem;">PUESTO</th>
                  <th scope="col" class="px-6 py-3 border text-center" style="width: 10rem;">Fecha límite</th>
                  <th scope="col" class="px-6 py-3 border" style="width: 10rem;">CONOCIMIENTO</th>
                  <th scope="col" class="px-6 py-3 border" style="width: 10rem;">ACCIONES</th>
              </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let item of DataList?.registros">
              <tr class="border hover:bg-gray-100 cursor-pointer">
                <td class="px-2 py-4 text-center" (click)="item?.evaluado?.codigoFicha && toggleRowExpansion(item?.evaluado?.codigoFicha)">
                  <span class="inline-block transition-transform duration-200" [ngClass]="{'rotate-180': isRowExpanded(item?.evaluado?.codigoFicha)}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4">
                      <path d="m6 9 6 6 6-6"></path>
                    </svg>
                  </span>
                </td>
                <th class="px-6 py-4 text-black border">
                  <img class="w-20 h-20" [src]="item?.evaluado?.foto" crossorigin="anonymous" (error)="onImgError($event)" alt="Foto">
                </th>
                <th class="px-6 py-4 text-gray-900 whitespace-nowrap">
                  <div class="text-base font-semibold">{{ removeLeadingZeros(item.evaluado?.codigoFicha) }}</div>
                </th>
                <td class="px-6 py-4 text-black border">{{ item?.evaluado?.apellidosNombres }}</td>
                <td class="px-6 py-4 text-black border">{{ item?.evaluado?.unidadOrganica }}</td>
                <td class="px-6 py-4 text-black border">{{ item?.evaluado?.codigoPuesto }}</td>
                <td class="px-6 py-4 text-black border">{{ item?.evaluado?.nombrePuesto }}</td>
                <td [ngClass]="getStatusClass(item?.fechaLimite,item?.estadoExcepcion)" class="px-6 py-4 text-black border text-center">{{ReturnFormatedStatusDate(item?.fechaLimite).formattedDate}}</td>    
                <td class="px-6 py-4 text-black border">
                  <span *ngIf="item?.estadoExcepcion" class="badgegreen bg-green-500" style="display: block !important;">CONFIRMADO</span>
                  <span *ngIf="!item?.estadoExcepcion" class="badgered bg-red-500" style="display: block !important;">NO CONFIRMADO</span>
                </td>
                <td class="px-6 py-4">
                  <div class="w-full">
                      <button type="button" *ngIf="item?.estadoExcepcion" style="cursor: not-allowed;" class="w-full text-white bg-gray-500 font-medium rounded-lg text-sm px-2.5 py-2.5">Notificar</button>
                      <button type="button" *ngIf="!item?.estadoExcepcion && !ReturnFormatedStatusDate(item?.fechaLimite).isPast" (click)="sendEmailKnowledge(item?.evaluado?.apellidosNombres,item?.evaluado?.codigoPuesto,item?.evaluado?.codigoFicha)" class="w-full text-white bg-blue-500 hover:bg-blue-600 font-medium rounded-lg text-sm px-2.5 py-2.5">Notificar</button>
                      <button type="button" *ngIf="!item?.estadoExcepcion && ReturnFormatedStatusDate(item?.fechaLimite).isPast" (click)="ShowModal(item)" class="text-white bg-gray-500 hover:bg-gray-600 font-medium rounded-lg text-sm px-2.5 py-2.5 w-full">Reprogramar excepción</button>
                    </div>               
              </td>
              </tr>
              <tr *ngIf="item?.evaluado?.codigoFicha && isRowExpanded(item?.evaluado?.codigoFicha)" class="bg-gray-50">
                <td colspan="10" class="px-6 py-4 text-black border">
                  <div class="grid bg-gray-200 p-2 rounded-md">
                    <div><strong>Administrador que autorizó la excepción: </strong>{{item?.admin.apellidosNombres}}</div>
                    <div><strong>Registro de excepción: </strong> {{item?.fechaRegistro  | date: 'dd/MM/yyyy' }}</div>
                  </div>
                </td>
              </tr>
            </ng-container> 
          </tbody>
      </table>
    </div>
    
    <!-- Autoevaluation table -->
    <div *ngIf="OnSearchViewType === 'autoeval' && showtable" class="relative overflow-x-auto  ">
      <table class="w-full text-sm text-left rtl:text-right text-gray-500 border solid">
          <thead class="text-xs text-gray-700 uppercase bg-gray-5">
            <tr>
              <th scope="col" class="px-2 py-3 border" style="width: 2rem;">
                <!-- Columna para la flecha -->
              </th>
              <th scope="col" class="px-6 py-3 border" style="width: 8rem;">Foto</th>
              <th scope="col" class="px-6 py-3 border" style="width: 5.9rem;">COD. FICHA</th>
              <th scope="col" class="px-6 py-3 border" style="width: 35rem;">APELLIDOS Y NOMBRES</th>
              <th scope="col" class="px-6 py-3 border" style="width: 8.5rem;">UNIDAD ORGÁNICA</th>
              <th scope="col" class="px-6 py-3 border" style="width: 6.8rem;">COD. PUESTO</th>
              <th scope="col" class="px-6 py-3 border text-wrap" style="width: 35rem;">PUESTO</th>
            <th scope="col" class="px-6 py-3 border text-center" style="width: 10rem;">Fecha límite</th>
              <th scope="col" class="px-6 py-3 border" style="width: 10rem;">Autoevaluación</th>
              <th scope="col" class="px-6 py-3 border" style="width: 10rem;">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let item of DataList?.registros">
              <tr class="border hover:bg-gray-100 cursor-pointer">
                <td class="px-2 py-4 text-center" (click)="item?.evaluado?.codigoFicha && toggleRowExpansion(item?.evaluado?.codigoFicha)">
                  <span class="inline-block transition-transform duration-200" [ngClass]="{'rotate-180': isRowExpanded(item?.evaluado?.codigoFicha)}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4">
                      <path d="m6 9 6 6 6-6"></path>
                    </svg>
                  </span>
                </td>
                <th class="px-6 py-4 text-black border">
                  <img class="w-20 h-20" [src]="item?.evaluado?.foto" crossorigin="anonymous" (error)="onImgError($event)" alt="Foto">
                </th>
                <th class="px-6 py-4 text-gray-900 whitespace-nowrap">
                  <div class="text-base font-semibold">{{ removeLeadingZeros(item.evaluado?.codigoFicha) }}</div>
                </th>
                <td class="px-6 py-4 text-black border">{{ item?.evaluado?.apellidosNombres }}</td>
                <td class="px-6 py-4 text-black border">{{ item?.evaluado?.unidadOrganica }}</td>
                <td class="px-6 py-4 text-black border">{{ item?.evaluado?.codigoPuesto }}</td>
                <td class="px-6 py-4 text-black border">{{ item?.evaluado?.nombrePuesto }}</td>
                <td [ngClass]="getStatusClass(item?.fechaLimite,item?.estadoExcepcion)" class="px-6 py-4 text-black border text-center">{{ReturnFormatedStatusDate(item?.fechaLimite).formattedDate}}</td>    
                <td class="px-6 py-4 text-black border">
                  <span *ngIf="item?.estadoExcepcion" class="badgegreen bg-green-500" style="display: block !important;">CONFIRMADO</span>
                  <span *ngIf="!item?.estadoExcepcion" class="badgered bg-red-500" style="display: block !important;">NO CONFIRMADO</span>
                </td>
                <td class="px-6 py-4">
                  <div class="w-full">
                      <button type="button" *ngIf="item?.estadoExcepcion" style="cursor: not-allowed;" class="w-full text-white bg-gray-500 font-medium rounded-lg text-sm px-2.5 py-2.5">Notificar</button>
                      <button type="button" *ngIf="!item?.estadoExcepcion && !ReturnFormatedStatusDate(item?.fechaLimite).isPast" (click)="sendEmailAutoevaluation(item?.evaluado?.apellidosNombres,item?.evaluado?.codigoPuesto,item?.evaluado?.codigoFicha)" class="w-full text-white bg-blue-500 hover:bg-blue-600 font-medium rounded-lg text-sm px-2.5 py-2.5">Notificar</button>
                      <button type="button" *ngIf="!item?.estadoExcepcion && ReturnFormatedStatusDate(item?.fechaLimite).isPast" (click)="ShowModal(item)" class="text-white bg-gray-500 hover:bg-gray-600 font-medium rounded-lg text-sm px-2.5 py-2.5 w-full">Reprogramar excepción</button>
                    </div>               
              </td>
              </tr>
              <tr *ngIf="item?.evaluado?.codigoFicha && isRowExpanded(item?.evaluado?.codigoFicha)" class="bg-gray-50">
                <td colspan="10" class="px-6 py-4 text-black border">
                  <div class="grid bg-gray-200 p-2 rounded-md">
                    <div><strong>Administrador que autorizó la excepción: </strong>{{item?.admin.apellidosNombres}}</div>
                    <div><strong>Registro de excepción: </strong> {{item?.fechaRegistro  | date: 'dd/MM/yyyy' }}</div>
                  </div>
                </td>
              </tr>
            </ng-container> 
          </tbody>
      </table>
    </div>
    
    <!-- Evaluation table -->
    <div *ngIf="OnSearchViewType === 'eval' && showtable" class="relative overflow-x-auto  ">
      <table class="w-full text-sm text-left rtl:text-right text-gray-500 border solid">
          <thead class="text-xs text-gray-700 uppercase bg-gray-5">
            <tr>
              <th scope="col" class="px-6 py-3 border" style="width: 8rem;">Foto</th>
              <th scope="col" class="px-6 py-3 border" style="width: 5.9rem;">COD. FICHA</th>
              <th scope="col" class="px-6 py-3 border" style="width: 35rem;">APELLIDOS Y NOMBRES</th>
              <th scope="col" class="px-6 py-3 border" style="width: 8.5rem;">UNIDAD ORGÁNICA</th>
              <th scope="col" class="px-6 py-3 border" style="width: 6.8rem;">COD. PUESTO</th>
              <th scope="col" class="px-6 py-3 border text-wrap" style="width: 35rem;">PUESTO</th>
              <th scope="col" class="px-6 py-3 border">Evaluados</th>
              <th scope="col" class="px-6 py-3 border">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let item of DataList?.registros">
              <tr class="border hover:bg-gray-100 cursor-pointer">
                <th class="px-6 py-4 text-black border">
                  <img class="w-20 h-20" [src]="item?.evaluador?.foto" crossorigin="anonymous" (error)="onImgError($event)" alt="Foto">
                </th>
                <th class="px-6 py-4 text-gray-900 whitespace-nowrap">
                  <div class="text-base font-semibold">{{ removeLeadingZeros(item.evaluador?.codigoFicha) }}</div>
                </th>
                <td class="px-6 py-4 text-black border">{{ item?.evaluador?.apellidosNombres }}</td>
                <td class="px-6 py-4 text-black border">{{ item?.evaluador?.unidadOrganica }}</td>
                <td class="px-6 py-4 text-black border">{{ item?.evaluador?.codigoPuesto }}</td>
                <td class="px-6 py-4 text-black border">{{ item?.evaluador?.nombrePuesto }}</td>
                <td class="px-6 py-4 text-black border">
                  <div class="flex items-center">
                    <p class="mb-0 mr-2">{{ item?.evaluados_terminados || 0 }}/{{ item?.evaluados_total || 0 }}</p>
                    <div class="w-full">
                      <progress id="myProgressBar" class="w-full progress" [value]="item?.evaluados_terminados || 0" [max]="item?.evaluados_total || 0"></progress>
                    </div>
                  </div>
                </td>
                <td class="px-6 py-4">
                  <button type="button" [routerLink]="['/home/reporte-excepcion-evaluacion-detalle', item?.evaluador?.apellidosNombres, item?.evaluador?.codigoFicha, item?.evaluador?.codigoPuesto, this.Periodo]" class="w-full text-white bg-green-500 hover:bg-green-600 font-medium rounded-lg text-sm px-2.5 py-2.5">Ver detalle</button>
                </td>
              </tr>
            </ng-container>
          </tbody>
      </table>
    </div>
  
    <!-- Calibration table -->
    <div *ngIf="OnSearchViewType === 'calibracion' && showtable" class="relative overflow-x-auto  ">
      <table class="w-full text-sm text-left rtl:text-right text-gray-500 border solid">
        <thead class="text-xs text-gray-700 uppercase bg-gray-5">
          <tr>
            <th scope="col" class="px-6 py-3 border" style="width: 2rem;">
              <!-- Columna para la flecha -->
            </th>
            <th scope="col" class="px-6 py-3 border" style="width: 8rem;">Foto</th>
            <th scope="col" class="px-6 py-3 border" style="width: 5.9rem;">COD. FICHA</th>
            <th scope="col" class="px-6 py-3 border" style="width: 35rem;">APELLIDOS Y NOMBRES</th>
            <th scope="col" class="px-6 py-3 border" style="width: 8.5rem;">UNIDAD ORGÁNICA</th>
            <th scope="col" class="px-6 py-3 border" style="width: 6.8rem;">COD. PUESTO</th>
            <th scope="col" class="px-6 py-3 border text-wrap" style="width: 35rem;">PUESTO</th>
            <th scope="col" class="px-6 py-3 border text-center" style="width: 10rem;">Fecha límite</th>
            <th scope="col" class="px-6 py-3 border" style="width: 10rem;">ESTADO</th>
            <th scope="col" class="px-6 py-3 border" style="width: 10rem;">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let item of DataList?.registros">
            <tr class="border hover:bg-gray-100 cursor-pointer">
              <td class="px-2 py-4 text-center" (click)="toggleRowExpansion(item.evaluado?.codigoFicha)">
                <span class="inline-block transition-transform duration-200" [ngClass]="{'rotate-180': isRowExpanded(item.evaluado?.codigoFicha)}">
                  <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4">
                    <path d="m6 9 6 6 6-6"></path>
                  </svg>
                </span>
              </td>
              <th class="px-6 py-4 text-black border">
                <img class="w-20 h-20" [src]="item.evaluado?.foto" crossorigin="anonymous" (error)="onImgError($event)" alt="Foto">
              </th>
              <th class="px-6 py-4 text-gray-900 whitespace-nowrap">
                <div class="text-base font-semibold">{{ removeLeadingZeros(item.evaluado?.codigoFicha) }}</div>
              </th>
              <td class="px-6 py-4 text-black border">{{ item.evaluado?.apellidosNombres }}</td>
              <td class="px-6 py-4 text-black border">{{ item.evaluado?.unidadOrganica }}</td>
              <td class="px-6 py-4 text-black border">{{ item.evaluado?.codigoPuesto }}</td>
              <td class="px-6 py-4 text-black border">{{ item.evaluado?.nombrePuesto }}</td>
              <td [ngClass]="getStatusClass(item.fechaLimite,item.estadoExcepcion)" class="px-6 py-4 text-black border text-center">{{ReturnFormatedStatusDate(item.fechaLimite).formattedDate}}</td>    
              <td class="px-6 py-4 text-black border">
                <div *ngIf="item.estadoExcepcion" class="flex items-center">
                  <span class="badgegreen bg-green-500">REALIZADO</span>
                </div>
                <div *ngIf="!item.estadoExcepcion" class="flex items-center">
                  <span class="badgered bg-red-500">NO REALIZADO</span>
                </div>
              </td>
              <td class="px-6 py-4">
                <div>
                  <button type="button" *ngIf="item.estadoExcepcion" [routerLink]="['/home/ver-progreso-calibracion', item.evaluado.codigoFicha, item.evaluado.codigoPuesto, item.evaluador?.codigoFicha, item.evaluador?.codigoPuesto, this.Periodo]" class="text-white bg-green-500 hover:bg-green-600 font-medium rounded-lg text-sm px-2.5 py-2.5 w-full">Ver resultados</button>
                  <button type="button" *ngIf="!item.estadoExcepcion && !ReturnFormatedStatusDate(item.fechaLimite).isPast" (click)="SendNotificationCalibration(item.evaluador?.apellidosNombres, item.idCalibracion)" class="text-white bg-blue-500 hover:bg-blue-600 font-medium rounded-lg text-sm px-2.5 py-2.5 w-full">Notificar evaluador</button>
                  <button type="button" *ngIf="!item.estadoExcepcion && ReturnFormatedStatusDate(item.fechaLimite).isPast" (click)="ShowModal(item)" class="text-white bg-gray-500 font-medium rounded-lg text-sm px-2.5 py-2.5 w-full">Reprogramar excepción</button>
                </div>
              </td>
            </tr>
            <tr *ngIf="isRowExpanded(item.evaluado?.codigoFicha)" class="bg-gray-50">
              <td colspan="10" class="px-6 py-4 text-black border">
                <div class="grid bg-gray-200 p-2 rounded-md">
                  <div><strong>Ficha del evaluador: </strong> {{ removeLeadingZeros(item.evaluador?.codigoFicha) }}</div>
                  <div><strong>Nombres del evaluador: </strong> {{ item.evaluador?.apellidosNombres }}</div>
                  <div><strong>Administrador que autorizó la excepción: </strong> {{ item.admin?.apellidosNombres }}</div>
                  <div><strong>Registro de excepción: </strong> {{ ReturnFormatedDate(item.fechaRegistro) }}</div>
                </div>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
    
    <!-- Feedback table -->
    <div *ngIf="OnSearchViewType === 'retroalimentacion' && showtable" class="relative overflow-x-auto  ">
      <table class="w-full text-sm text-left rtl:text-right text-gray-500 border solid">
        <thead class="text-xs text-gray-700 uppercase bg-gray-5">
          <tr>
            <th scope="col" class="px-6 py-3 border" style="width: 8rem;">Foto</th>
            <th scope="col" class="px-6 py-3 border" style="width: 5.9rem;">COD. FICHA</th>
            <th scope="col" class="px-6 py-3 border" style="width: 35rem;">APELLIDOS Y NOMBRES</th>
            <th scope="col" class="px-6 py-3 border" style="width: 8.5rem;">UNIDAD ORGÁNICA</th>
            <th scope="col" class="px-6 py-3 border" style="width: 6.8rem;">COD. PUESTO</th>
            <th scope="col" class="px-6 py-3 border text-wrap" style="width: 35rem;">PUESTO</th>
            <th scope="col" class="px-6 py-3 border">Retroalimentación</th>
            <th scope="col" class="px-6 py-3 border">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let item of DataList?.registros">
            <tr class="border hover:bg-gray-100 cursor-pointer">
              <th class="px-6 py-4 text-black border">
                <img class="w-20 h-20" [src]="item?.evaluador?.foto" crossorigin="anonymous" (error)="onImgError($event)" alt="Foto">
              </th>
              <th class="px-6 py-4 text-gray-900 whitespace-nowrap">
                <div class="text-base font-semibold">{{ removeLeadingZeros(item.evaluador?.codigoFicha) }}</div>
              </th>
              <td class="px-6 py-4 text-black border">{{ item?.evaluador?.apellidosNombres }}</td>
              <td class="px-6 py-4 text-black border">{{ item?.evaluador?.unidadOrganica }}</td>
              <td class="px-6 py-4 text-black border">{{ item?.evaluador?.codigoPuesto }}</td>
              <td class="px-6 py-4 text-black border">{{ item?.evaluador?.nombrePuesto }}</td>
              <td class="px-6 py-4 text-black border">
                <div class="flex items-center">
                  <p class="mb-0 mr-2">{{ item?.evaluados_terminados || 0 }}/{{ item?.evaluados_total || 0 }}</p>
                  <div class="w-full">
                    <progress id="myProgressBar" class="w-full progress" [value]="item?.evaluados_terminados || 0" [max]="item?.evaluados_total || 0"></progress>
                  </div>
                </div>
              </td>
              <td class="px-6 py-4">
                <button type="button" [routerLink]="['/home/reporte-excepcion-retroalimentacion-detalle', item?.evaluador?.apellidosNombres, item?.evaluador?.codigoFicha, item?.evaluador?.codigoPuesto, this.Periodo]" class="w-full text-white bg-green-500 hover:bg-green-600 font-medium rounded-lg text-sm px-2.5 py-2.5">Ver detalle</button>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
    
    <!-- PID  Table-->
    <div *ngIf="OnSearchViewType === 'PID_EST' && showtable" class="relative overflow-x-auto  ">
      <table class="w-full text-sm text-left rtl:text-right text-gray-500 border solid">
        <thead class="text-xs text-gray-700 uppercase bg-gray-5">
          <tr>
            <th scope="col" class="px-6 py-3 border" style="width: 8rem;">Foto</th>
            <th scope="col" class="px-6 py-3 border" style="width: 5.9rem;">COD. FICHA</th>
            <th scope="col" class="px-6 py-3 border" style="width: 35rem;">APELLIDOS Y NOMBRES</th>
            <th scope="col" class="px-6 py-3 border" style="width: 8.5rem;">UNIDAD ORGÁNICA</th>
            <th scope="col" class="px-6 py-3 border" style="width: 6.8rem;">COD. PUESTO</th>
            <th scope="col" class="px-6 py-3 border text-wrap" style="width: 35rem;">PUESTO</th>
            <th scope="col" class="px-6 py-3 border">PROGRESO DE EVALUACIÓN DE PID</th>
            <th scope="col" class="px-6 py-3 border">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let item of DataList?.registros">
            <tr class="border hover:bg-gray-100 cursor-pointer">
              <th class="px-6 py-4 text-black border">
                <img class="w-20 h-20" [src]="item?.evaluador?.foto" crossorigin="anonymous" (error)="onImgError($event)" alt="Foto">
              </th>
              <th class="px-6 py-4 text-gray-900 whitespace-nowrap">
                <div class="text-base font-semibold">{{ removeLeadingZeros(item.evaluador?.codigoFicha) }}</div>
              </th>
              <td class="px-6 py-4 text-black border">{{ item?.evaluador?.apellidosNombres }}</td>
              <td class="px-6 py-4 text-black border">{{ item?.evaluador?.unidadOrganica }}</td>
              <td class="px-6 py-4 text-black border">{{ item?.evaluador?.codigoPuesto }}</td>
              <td class="px-6 py-4 text-black border">{{ item?.evaluador?.nombrePuesto }}</td>
              <td class="px-6 py-4 text-black border">
                <div class="flex items-center">
                  <p class="mb-0 mr-2">{{ item?.evaluados_terminados || 0 }}/{{ item?.evaluados_total || 0 }}</p>
                  <div class="w-full">
                    <progress id="myProgressBar" class="w-full progress" [value]="item?.evaluados_terminados || 0" [max]="item?.evaluados_total || 0"></progress>
                  </div>
                </div>
              </td>
              <td class="px-6 py-4">
                <button type="button" [routerLink]="['/home/reporte-excepcion-pid-cumplimiento-detalleevaluador','detalle', item?.evaluador?.apellidosNombres, item?.evaluador?.codigoFicha, item?.evaluador?.codigoPuesto, this.Periodo]" class="w-full text-white bg-green-500 hover:bg-green-600 font-medium rounded-lg text-sm px-2.5 py-2.5">Ver detalle</button>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>

    <!-- CUMP  Table-->
    <div *ngIf="OnSearchViewType === 'PID_EVAL' && showtable" class="relative overflow-x-auto  ">
          <table class="w-full text-sm text-left rtl:text-right text-gray-500 border solid">
            <thead class="text-xs text-gray-700 uppercase bg-gray-5">
              <tr>
                <th scope="col" class="px-6 py-3 border" style="width: 8rem;">Foto</th>
                <th scope="col" class="px-6 py-3 border" style="width: 5.9rem;">COD. FICHA</th>
                <th scope="col" class="px-6 py-3 border" style="width: 35rem;">APELLIDOS Y NOMBRES</th>
                <th scope="col" class="px-6 py-3 border" style="width: 8.5rem;">UNIDAD ORGÁNICA</th>
                <th scope="col" class="px-6 py-3 border" style="width: 6.8rem;">COD. PUESTO</th>
                <th scope="col" class="px-6 py-3 border text-wrap" style="width: 35rem;">PUESTO</th>
                <th scope="col" class="px-6 py-3 border">PROGRESO DE EVALUACIÓN DE CUMPLIMIENTO DE PID</th>
                <th scope="col" class="px-6 py-3 border">Acciones</th>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngFor="let item of DataList?.registros">
                <tr class="border hover:bg-gray-100 cursor-pointer">
                  <th class="px-6 py-4 text-black border">
                    <img class="w-20 h-20" [src]="item?.evaluador?.foto" crossorigin="anonymous" (error)="onImgError($event)" alt="Foto">
                  </th>
                  <th class="px-6 py-4 text-gray-900 whitespace-nowrap">
                    <div class="text-base font-semibold">{{ removeLeadingZeros(item.evaluador?.codigoFicha) }}</div>
                  </th>
                  <td class="px-6 py-4 text-black border">{{ item?.evaluador?.apellidosNombres }}</td>
                  <td class="px-6 py-4 text-black border">{{ item?.evaluador?.unidadOrganica }}</td>
                  <td class="px-6 py-4 text-black border">{{ item?.evaluador?.codigoPuesto }}</td>
                  <td class="px-6 py-4 text-black border">{{ item?.evaluador?.nombrePuesto }}</td>
                  <td class="px-6 py-4 text-black border">
                    <div class="flex items-center">
                      <p class="mb-0 mr-2">{{ item?.evaluados_terminados || 0 }}/{{ item?.evaluados_total || 0 }}</p>
                      <div class="w-full">
                        <progress id="myProgressBar" class="w-full progress" [value]="item?.evaluados_terminados || 0" [max]="item?.evaluados_total || 0"></progress>
                      </div>
                    </div>
                  </td>
                  <td class="px-6 py-4">
                    <button type="button" [routerLink]="['/home/reporte-excepcion-pid-cumplimiento-detalleevaluador','detalle', item?.evaluador?.apellidosNombres, item?.evaluador?.codigoFicha, item?.evaluador?.codigoPuesto, this.Periodo]" class="w-full text-white bg-green-500 hover:bg-green-600 font-medium rounded-lg text-sm px-2.5 py-2.5">Ver detalle</button>
                  </td>
                </tr>
              </ng-container>
            </tbody>
          </table>
    </div>
  
    <app-changeexceptionlimitdates *ngIf="ShowChangeExceptionLimitDateModal" (close)="closeModal($event)" [PeriodCode]="this.Periodo" [EntryData]="this.EntryData"></app-changeexceptionlimitdates>